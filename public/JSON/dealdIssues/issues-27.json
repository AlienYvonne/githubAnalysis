[{"url": "https://api.github.com/repos/nlohmann/json/issues/214", "repository_url": "https://api.github.com/repos/nlohmann/json", "labels_url": "https://api.github.com/repos/nlohmann/json/issues/214/labels{/name}", "comments_url": "https://api.github.com/repos/nlohmann/json/issues/214/comments", "events_url": "https://api.github.com/repos/nlohmann/json/issues/214/events", "html_url": "https://github.com/nlohmann/json/issues/214", "id": 136950988, "node_id": "MDU6SXNzdWUxMzY5NTA5ODg=", "number": 214, "title": "Memory allocations using range-based for loops", "user": {"login": "habemus-papadum", "id": 1161604, "node_id": "MDQ6VXNlcjExNjE2MDQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/1161604?v=4", "gravatar_id": "", "url": "https://api.github.com/users/habemus-papadum", "html_url": "https://github.com/habemus-papadum", "followers_url": "https://api.github.com/users/habemus-papadum/followers", "following_url": "https://api.github.com/users/habemus-papadum/following{/other_user}", "gists_url": "https://api.github.com/users/habemus-papadum/gists{/gist_id}", "starred_url": "https://api.github.com/users/habemus-papadum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/habemus-papadum/subscriptions", "organizations_url": "https://api.github.com/users/habemus-papadum/orgs", "repos_url": "https://api.github.com/users/habemus-papadum/repos", "events_url": "https://api.github.com/users/habemus-papadum/events{/privacy}", "received_events_url": "https://api.github.com/users/habemus-papadum/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 46374235, "node_id": "MDU6TGFiZWw0NjM3NDIzNQ==", "url": "https://api.github.com/repos/nlohmann/json/labels/kind:%20question", "name": "kind: question", "color": "cc317c", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-02-27T18:16:23Z", "updated_at": "2016-03-06T19:03:15Z", "closed_at": "2016-03-06T19:03:15Z", "author_association": "NONE", "body": "In the Readme, the following example is provided:\n\n```\nfor (auto element : j) {\n  std::cout << element << '\\n';\n}\n```\n\nDoes this end up creating a copy of each array element during each iteration?\n\nAre \n\n```\nfor (const auto &element : j) {\n  std::cout << element << '\\n';\n}\n```\n\nand \n\n```\nfor (auto &element : j) {\n  element[\"a\"]=...;\n}\n```\n\nbetter alternatives or is the version in the readme the optimal usage for all scenarios?\n\n(In some sense this is just a basic c++ question.  I don't really know how ranged for loop work in c++, or how to actually check what is happening in each of the scenarios, but in any case I am specifically curious about it works for basic_json's implementation)\n\nThanks!\n"}, {"url": "https://api.github.com/repos/nlohmann/json/issues/211", "repository_url": "https://api.github.com/repos/nlohmann/json", "labels_url": "https://api.github.com/repos/nlohmann/json/issues/211/labels{/name}", "comments_url": "https://api.github.com/repos/nlohmann/json/issues/211/comments", "events_url": "https://api.github.com/repos/nlohmann/json/issues/211/events", "html_url": "https://github.com/nlohmann/json/issues/211", "id": 135055075, "node_id": "MDU6SXNzdWUxMzUwNTUwNzU=", "number": 211, "title": "would you like to support gcc 4.8.1? ", "user": {"login": "abc100m", "id": 4769764, "node_id": "MDQ6VXNlcjQ3Njk3NjQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/4769764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abc100m", "html_url": "https://github.com/abc100m", "followers_url": "https://api.github.com/users/abc100m/followers", "following_url": "https://api.github.com/users/abc100m/following{/other_user}", "gists_url": "https://api.github.com/users/abc100m/gists{/gist_id}", "starred_url": "https://api.github.com/users/abc100m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abc100m/subscriptions", "organizations_url": "https://api.github.com/users/abc100m/orgs", "repos_url": "https://api.github.com/users/abc100m/repos", "events_url": "https://api.github.com/users/abc100m/events{/privacy}", "received_events_url": "https://api.github.com/users/abc100m/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 46374236, "node_id": "MDU6TGFiZWw0NjM3NDIzNg==", "url": "https://api.github.com/repos/nlohmann/json/labels/solution:%20wontfix", "name": "solution: wontfix", "color": "000000", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-02-20T09:46:25Z", "updated_at": "2016-03-30T17:23:57Z", "closed_at": "2016-03-30T17:23:57Z", "author_association": "NONE", "body": "our machine which installed centos has gcc 4.8.1 installed, and it's hardly to upgrade to gcc 4.9.  so, would you like to have a work round to support for gcc 4.8.1?\n\nfor example, work round for bug 55817 of  gcc 4.8 :\n\n``` cpp\n/*\n        result.m_it.array_iterator = m_value.array->insert(pos.m_it.array_iterator, ilist);\n*/\n        #if __GNUC__ == 4 && __GNUC_MINOR__ == 8\n            auto insert_pos = std::distance(m_value.array->begin(), pos.m_it.array_iterator);\n            m_value.array->insert(pos.m_it.array_iterator, ilist);\n            result.m_it.array_iterator = m_value.array->begin() + insert_pos;\n        #else\n            result.m_it.array_iterator = m_value.array->insert(pos.m_it.array_iterator, ilist);\n        #endif\n```\n"}, {"url": "https://api.github.com/repos/nlohmann/json/issues/210", "repository_url": "https://api.github.com/repos/nlohmann/json", "labels_url": "https://api.github.com/repos/nlohmann/json/issues/210/labels{/name}", "comments_url": "https://api.github.com/repos/nlohmann/json/issues/210/comments", "events_url": "https://api.github.com/repos/nlohmann/json/issues/210/events", "html_url": "https://github.com/nlohmann/json/issues/210", "id": 134927583, "node_id": "MDU6SXNzdWUxMzQ5Mjc1ODM=", "number": 210, "title": "Reading concatenated json's from an istream", "user": {"login": "habemus-papadum", "id": 1161604, "node_id": "MDQ6VXNlcjExNjE2MDQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/1161604?v=4", "gravatar_id": "", "url": "https://api.github.com/users/habemus-papadum", "html_url": "https://github.com/habemus-papadum", "followers_url": "https://api.github.com/users/habemus-papadum/followers", "following_url": "https://api.github.com/users/habemus-papadum/following{/other_user}", "gists_url": "https://api.github.com/users/habemus-papadum/gists{/gist_id}", "starred_url": "https://api.github.com/users/habemus-papadum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/habemus-papadum/subscriptions", "organizations_url": "https://api.github.com/users/habemus-papadum/orgs", "repos_url": "https://api.github.com/users/habemus-papadum/repos", "events_url": "https://api.github.com/users/habemus-papadum/events{/privacy}", "received_events_url": "https://api.github.com/users/habemus-papadum/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 46374235, "node_id": "MDU6TGFiZWw0NjM3NDIzNQ==", "url": "https://api.github.com/repos/nlohmann/json/labels/kind:%20question", "name": "kind: question", "color": "cc317c", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2016-02-19T17:41:01Z", "updated_at": "2016-02-22T07:54:09Z", "closed_at": "2016-02-22T07:54:09Z", "author_association": "NONE", "body": "Hi, \nYour library is great (and because I am lazy about being lazy, I've typed nlohmann::json so many times that I feel like I practically know you)\n\nI have a file of multiple concatenated, pretty printed json objects that I want to parse.  Is there a way with the current library to split a string in individual json which than can be dealt with as usual (of course, any other reasonable way of skinning the same cat would be appreciated.)  Otherwise, I've seen json PCRE regexes that might also do the trick.   Do think that is the way to go?\n\nThanks!   \n"}, {"url": "https://api.github.com/repos/nlohmann/json/issues/204", "repository_url": "https://api.github.com/repos/nlohmann/json", "labels_url": "https://api.github.com/repos/nlohmann/json/issues/204/labels{/name}", "comments_url": "https://api.github.com/repos/nlohmann/json/issues/204/comments", "events_url": "https://api.github.com/repos/nlohmann/json/issues/204/events", "html_url": "https://github.com/nlohmann/json/issues/204", "id": 132649860, "node_id": "MDU6SXNzdWUxMzI2NDk4NjA=", "number": 204, "title": "Conflicting typedef of ssize_t on Windows 32 bit when using Boost.Python", "user": {"login": "phogy", "id": 653209, "node_id": "MDQ6VXNlcjY1MzIwOQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/653209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phogy", "html_url": "https://github.com/phogy", "followers_url": "https://api.github.com/users/phogy/followers", "following_url": "https://api.github.com/users/phogy/following{/other_user}", "gists_url": "https://api.github.com/users/phogy/gists{/gist_id}", "starred_url": "https://api.github.com/users/phogy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phogy/subscriptions", "organizations_url": "https://api.github.com/users/phogy/orgs", "repos_url": "https://api.github.com/users/phogy/repos", "events_url": "https://api.github.com/users/phogy/events{/privacy}", "received_events_url": "https://api.github.com/users/phogy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 296080787, "node_id": "MDU6TGFiZWwyOTYwODA3ODc=", "url": "https://api.github.com/repos/nlohmann/json/labels/platform:%20visual%20studio", "name": "platform: visual studio", "color": "eb6420", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "nlohmann", "id": 159488, "node_id": "MDQ6VXNlcjE1OTQ4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/159488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nlohmann", "html_url": "https://github.com/nlohmann", "followers_url": "https://api.github.com/users/nlohmann/followers", "following_url": "https://api.github.com/users/nlohmann/following{/other_user}", "gists_url": "https://api.github.com/users/nlohmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/nlohmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nlohmann/subscriptions", "organizations_url": "https://api.github.com/users/nlohmann/orgs", "repos_url": "https://api.github.com/users/nlohmann/repos", "events_url": "https://api.github.com/users/nlohmann/events{/privacy}", "received_events_url": "https://api.github.com/users/nlohmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nlohmann", "id": 159488, "node_id": "MDQ6VXNlcjE1OTQ4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/159488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nlohmann", "html_url": "https://github.com/nlohmann", "followers_url": "https://api.github.com/users/nlohmann/followers", "following_url": "https://api.github.com/users/nlohmann/following{/other_user}", "gists_url": "https://api.github.com/users/nlohmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/nlohmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nlohmann/subscriptions", "organizations_url": "https://api.github.com/users/nlohmann/orgs", "repos_url": "https://api.github.com/users/nlohmann/repos", "events_url": "https://api.github.com/users/nlohmann/events{/privacy}", "received_events_url": "https://api.github.com/users/nlohmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/nlohmann/json/milestones/3", "html_url": "https://github.com/nlohmann/json/milestone/3", "labels_url": "https://api.github.com/repos/nlohmann/json/milestones/3/labels", "id": 1510937, "node_id": "MDk6TWlsZXN0b25lMTUxMDkzNw==", "number": 3, "title": "Release 2.0.0", "description": "This release adds several features such as JSON Pointers, JSON Patch, or support for 64 bit unsigned integers. Furthermore, several (subtle) bugs have been fixed.\r\n\r\nAs `noexcept` and `constexpr` specifier have been added to several functions, the public API has effectively been changed in a (potential) non-backwards compatible manner. As we adhere to [Semantic Versioning](http://semver.org), this calls for a new major version, so say hello to 2\ufe0f\u20e3.0\ufe0f\u20e3.0\ufe0f\u20e3.", "creator": {"login": "nlohmann", "id": 159488, "node_id": "MDQ6VXNlcjE1OTQ4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/159488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nlohmann", "html_url": "https://github.com/nlohmann", "followers_url": "https://api.github.com/users/nlohmann/followers", "following_url": "https://api.github.com/users/nlohmann/following{/other_user}", "gists_url": "https://api.github.com/users/nlohmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/nlohmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nlohmann/subscriptions", "organizations_url": "https://api.github.com/users/nlohmann/orgs", "repos_url": "https://api.github.com/users/nlohmann/repos", "events_url": "https://api.github.com/users/nlohmann/events{/privacy}", "received_events_url": "https://api.github.com/users/nlohmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 34, "state": "closed", "created_at": "2016-01-17T12:14:39Z", "updated_at": "2016-06-23T22:53:19Z", "due_on": "2016-06-23T07:00:00Z", "closed_at": "2016-06-23T22:53:19Z"}, "comments": 3, "created_at": "2016-02-10T09:42:24Z", "updated_at": "2016-02-11T17:01:17Z", "closed_at": "2016-02-10T20:41:56Z", "author_association": "NONE", "body": "I'm currently evaluating your JSON library for use in a project that also uses Boost.Python to expose an  API to the app as a Python class. I'm compiling with Python 2.7.11 and Boost.Python in turn includes its `pyconfig.h`, which typedefs `ssize_t` as an `int`. \nI'm not entirely sure whether Python or your hpp is correct here but your inclusion of `basetsd.h` and consequtive `using` definition of `ssize_t` to its `SSIZE_T`, attempts to redefine it as a `long`. This is during Windows 32 bit compilation on Visual Studio 2015.\n\n`json\\src\\json.hpp(53): error C2371: 'ssize_t': redefinition; different basic types`\n\nThanks in advance for any help or comments about this!\n"}, {"url": "https://api.github.com/repos/nlohmann/json/issues/203", "repository_url": "https://api.github.com/repos/nlohmann/json", "labels_url": "https://api.github.com/repos/nlohmann/json/issues/203/labels{/name}", "comments_url": "https://api.github.com/repos/nlohmann/json/issues/203/comments", "events_url": "https://api.github.com/repos/nlohmann/json/issues/203/events", "html_url": "https://github.com/nlohmann/json/issues/203", "id": 131848347, "node_id": "MDU6SXNzdWUxMzE4NDgzNDc=", "number": 203, "title": "Inconsistency between operator[] and push_back", "user": {"login": "nlohmann", "id": 159488, "node_id": "MDQ6VXNlcjE1OTQ4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/159488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nlohmann", "html_url": "https://github.com/nlohmann", "followers_url": "https://api.github.com/users/nlohmann/followers", "following_url": "https://api.github.com/users/nlohmann/following{/other_user}", "gists_url": "https://api.github.com/users/nlohmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/nlohmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nlohmann/subscriptions", "organizations_url": "https://api.github.com/users/nlohmann/orgs", "repos_url": "https://api.github.com/users/nlohmann/repos", "events_url": "https://api.github.com/users/nlohmann/events{/privacy}", "received_events_url": "https://api.github.com/users/nlohmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 46374234, "node_id": "MDU6TGFiZWw0NjM3NDIzNA==", "url": "https://api.github.com/repos/nlohmann/json/labels/solution:%20invalid", "name": "solution: invalid", "color": "e6e6e6", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "nlohmann", "id": 159488, "node_id": "MDQ6VXNlcjE1OTQ4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/159488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nlohmann", "html_url": "https://github.com/nlohmann", "followers_url": "https://api.github.com/users/nlohmann/followers", "following_url": "https://api.github.com/users/nlohmann/following{/other_user}", "gists_url": "https://api.github.com/users/nlohmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/nlohmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nlohmann/subscriptions", "organizations_url": "https://api.github.com/users/nlohmann/orgs", "repos_url": "https://api.github.com/users/nlohmann/repos", "events_url": "https://api.github.com/users/nlohmann/events{/privacy}", "received_events_url": "https://api.github.com/users/nlohmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nlohmann", "id": 159488, "node_id": "MDQ6VXNlcjE1OTQ4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/159488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nlohmann", "html_url": "https://github.com/nlohmann", "followers_url": "https://api.github.com/users/nlohmann/followers", "following_url": "https://api.github.com/users/nlohmann/following{/other_user}", "gists_url": "https://api.github.com/users/nlohmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/nlohmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nlohmann/subscriptions", "organizations_url": "https://api.github.com/users/nlohmann/orgs", "repos_url": "https://api.github.com/users/nlohmann/repos", "events_url": "https://api.github.com/users/nlohmann/events{/privacy}", "received_events_url": "https://api.github.com/users/nlohmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/nlohmann/json/milestones/3", "html_url": "https://github.com/nlohmann/json/milestone/3", "labels_url": "https://api.github.com/repos/nlohmann/json/milestones/3/labels", "id": 1510937, "node_id": "MDk6TWlsZXN0b25lMTUxMDkzNw==", "number": 3, "title": "Release 2.0.0", "description": "This release adds several features such as JSON Pointers, JSON Patch, or support for 64 bit unsigned integers. Furthermore, several (subtle) bugs have been fixed.\r\n\r\nAs `noexcept` and `constexpr` specifier have been added to several functions, the public API has effectively been changed in a (potential) non-backwards compatible manner. As we adhere to [Semantic Versioning](http://semver.org), this calls for a new major version, so say hello to 2\ufe0f\u20e3.0\ufe0f\u20e3.0\ufe0f\u20e3.", "creator": {"login": "nlohmann", "id": 159488, "node_id": "MDQ6VXNlcjE1OTQ4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/159488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nlohmann", "html_url": "https://github.com/nlohmann", "followers_url": "https://api.github.com/users/nlohmann/followers", "following_url": "https://api.github.com/users/nlohmann/following{/other_user}", "gists_url": "https://api.github.com/users/nlohmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/nlohmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nlohmann/subscriptions", "organizations_url": "https://api.github.com/users/nlohmann/orgs", "repos_url": "https://api.github.com/users/nlohmann/repos", "events_url": "https://api.github.com/users/nlohmann/events{/privacy}", "received_events_url": "https://api.github.com/users/nlohmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 34, "state": "closed", "created_at": "2016-01-17T12:14:39Z", "updated_at": "2016-06-23T22:53:19Z", "due_on": "2016-06-23T07:00:00Z", "closed_at": "2016-06-23T22:53:19Z"}, "comments": 2, "created_at": "2016-02-06T11:52:12Z", "updated_at": "2016-02-07T08:51:44Z", "closed_at": "2016-02-07T08:51:36Z", "author_association": "OWNER", "body": "# Situation\n\nWhen `operator[]` is called on a null value with a `string_t` argument, the value is silently converted to an object. When `operator[]` is called on a null value with an integer argument, an exception is thrown.\n\nThis feels inconsistent compared to `push_back`: When `push_back` is called on a null value, the value is silently converted to an object (if the argument was a `string_t`/`json`-pair) or an array (if the argument was a `json` value).\n# Proposal\n\nI would propose changing `operator[]` to _always_ convert a null value to an array. Thereby, the following code would be possible:\n\n``` cpp\njson j;\nj[2] = 17;\nstd::cout << j << '\\n';\n```\n\nAnd the output would be `[null,null,17]`.\n# Rationale\n\nThis would then behave exactly like the following code:\n\n``` cpp\njson j = json::array();\nj[2] = 17;\nstd::cout << j << '\\n';\n```\n\nThis code already works as described: Calling `operator[]` on an array, but with an integer argument out of bounds extends the array accordingly with null values.\n\nWhat do you think?\n"}, {"url": "https://api.github.com/repos/nlohmann/json/issues/202", "repository_url": "https://api.github.com/repos/nlohmann/json", "labels_url": "https://api.github.com/repos/nlohmann/json/issues/202/labels{/name}", "comments_url": "https://api.github.com/repos/nlohmann/json/issues/202/comments", "events_url": "https://api.github.com/repos/nlohmann/json/issues/202/events", "html_url": "https://github.com/nlohmann/json/issues/202", "id": 129940920, "node_id": "MDU6SXNzdWUxMjk5NDA5MjA=", "number": 202, "title": "Performance in miloyip/nativejson-benchmark", "user": {"login": "twelsby", "id": 16697318, "node_id": "MDQ6VXNlcjE2Njk3MzE4", "avatar_url": "https://avatars0.githubusercontent.com/u/16697318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/twelsby", "html_url": "https://github.com/twelsby", "followers_url": "https://api.github.com/users/twelsby/followers", "following_url": "https://api.github.com/users/twelsby/following{/other_user}", "gists_url": "https://api.github.com/users/twelsby/gists{/gist_id}", "starred_url": "https://api.github.com/users/twelsby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/twelsby/subscriptions", "organizations_url": "https://api.github.com/users/twelsby/orgs", "repos_url": "https://api.github.com/users/twelsby/repos", "events_url": "https://api.github.com/users/twelsby/events{/privacy}", "received_events_url": "https://api.github.com/users/twelsby/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2016-01-30T05:04:21Z", "updated_at": "2017-01-02T16:36:10Z", "closed_at": "2017-01-02T16:36:10Z", "author_association": "CONTRIBUTOR", "body": "Here is the results of testing 1.1.0, 2.0.0 and my proposed changes to 2.0.0 under miloyip/nativejson-benchmark [Results.zip](https://github.com/nlohmann/json/files/110681/Results.zip).\n\nHere is my (possibly naive) interpretation:\n\n**Parse**\nOur lexer looks to be pretty good and parsing of strings is about as good as it could be.  Some further improvements could be made in number parsing by incorporating custom floating point parsing into the proposed `get_integer()` in lieu of `strtof()`/`strtod()`/`strtold()` but this would greatly increase code complexity and the improvements would likely be marginal at best.\n\nLooking at the other libraries results (especially the ones with fast parsing) it looks like allocations are what is killing us.  The other thing that might be killing us is the use of map.  This is not ideal for parsing a large unordered file because the tree will be continually re-balanced.  The benefit of using a map is lookup, but that isn't really tested in this benchmark as the timed access is all sequential.  \n\nNote that I'm not saying we should be moving away from map, because our library is really designed around using the json object to store data, not merely to parse/dump json files.  We probably just have to accept that our parse is always going to be slower.\n\n**Stringify**\nThe proposed change to `snprintf()` for floating point stringifying highlights just how bad `stringstream`s are for this.  There may be further improvements by reducing our reliance on `stringstream`s elsewhere but this would come at the expense of c++ style.  I did try using `snprintf()` for integers, and even a very efficient custom function I've used before on microcontrollers, but didn't achieve any significant improvement so perhaps the issue is only manifest for floating point numbers.\n\nThe other thing here is that use of map is probably not as fast for sequential dumping as other container types.  I think this is just a price we have to pay.\n\n**Time**\nThis test simply iterates through the document while collecting statistics about number of strings, numbers, objects, arrays etc.  Any difference between library versions is an anomaly as there are no significant differences (only the bitfield overhead for the proposed changes).  Because this test is sequential we are at a disadvantage using maps.\n\nThe bottom line seems to be that a choice must be made - do we optimize for rapid parsing/dumping/sequential access at the expense of lookup, or do we optimize for lookup and accept that parsing/dumping/sequential access will always be a little slower (but not that much).\n\n@nlohmann, if you are able to run similar tests under Linux/OSX that would help to make sure this isn't just a VS2015 issue.\n"}, {"url": "https://api.github.com/repos/nlohmann/json/issues/199", "repository_url": "https://api.github.com/repos/nlohmann/json", "labels_url": "https://api.github.com/repos/nlohmann/json/issues/199/labels{/name}", "comments_url": "https://api.github.com/repos/nlohmann/json/issues/199/comments", "events_url": "https://api.github.com/repos/nlohmann/json/issues/199/events", "html_url": "https://github.com/nlohmann/json/issues/199", "id": 129931473, "node_id": "MDU6SXNzdWUxMjk5MzE0NzM=", "number": 199, "title": "Small bugs in json.hpp (get_number) and unit.cpp (non-standard integer type test)", "user": {"login": "twelsby", "id": 16697318, "node_id": "MDQ6VXNlcjE2Njk3MzE4", "avatar_url": "https://avatars0.githubusercontent.com/u/16697318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/twelsby", "html_url": "https://github.com/twelsby", "followers_url": "https://api.github.com/users/twelsby/followers", "following_url": "https://api.github.com/users/twelsby/following{/other_user}", "gists_url": "https://api.github.com/users/twelsby/gists{/gist_id}", "starred_url": "https://api.github.com/users/twelsby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/twelsby/subscriptions", "organizations_url": "https://api.github.com/users/twelsby/orgs", "repos_url": "https://api.github.com/users/twelsby/repos", "events_url": "https://api.github.com/users/twelsby/events{/privacy}", "received_events_url": "https://api.github.com/users/twelsby/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 232252782, "node_id": "MDU6TGFiZWwyMzIyNTI3ODI=", "url": "https://api.github.com/repos/nlohmann/json/labels/confirmed", "name": "confirmed", "color": "e11d21", "default": false}, {"id": 46374231, "node_id": "MDU6TGFiZWw0NjM3NDIzMQ==", "url": "https://api.github.com/repos/nlohmann/json/labels/kind:%20bug", "name": "kind: bug", "color": "fc2929", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nlohmann/json/milestones/3", "html_url": "https://github.com/nlohmann/json/milestone/3", "labels_url": "https://api.github.com/repos/nlohmann/json/milestones/3/labels", "id": 1510937, "node_id": "MDk6TWlsZXN0b25lMTUxMDkzNw==", "number": 3, "title": "Release 2.0.0", "description": "This release adds several features such as JSON Pointers, JSON Patch, or support for 64 bit unsigned integers. Furthermore, several (subtle) bugs have been fixed.\r\n\r\nAs `noexcept` and `constexpr` specifier have been added to several functions, the public API has effectively been changed in a (potential) non-backwards compatible manner. As we adhere to [Semantic Versioning](http://semver.org), this calls for a new major version, so say hello to 2\ufe0f\u20e3.0\ufe0f\u20e3.0\ufe0f\u20e3.", "creator": {"login": "nlohmann", "id": 159488, "node_id": "MDQ6VXNlcjE1OTQ4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/159488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nlohmann", "html_url": "https://github.com/nlohmann", "followers_url": "https://api.github.com/users/nlohmann/followers", "following_url": "https://api.github.com/users/nlohmann/following{/other_user}", "gists_url": "https://api.github.com/users/nlohmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/nlohmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nlohmann/subscriptions", "organizations_url": "https://api.github.com/users/nlohmann/orgs", "repos_url": "https://api.github.com/users/nlohmann/repos", "events_url": "https://api.github.com/users/nlohmann/events{/privacy}", "received_events_url": "https://api.github.com/users/nlohmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 34, "state": "closed", "created_at": "2016-01-17T12:14:39Z", "updated_at": "2016-06-23T22:53:19Z", "due_on": "2016-06-23T07:00:00Z", "closed_at": "2016-06-23T22:53:19Z"}, "comments": 1, "created_at": "2016-01-30T02:41:16Z", "updated_at": "2016-01-30T12:36:44Z", "closed_at": "2016-01-30T12:36:44Z", "author_association": "CONTRIBUTOR", "body": "There is a small bug in the following area of json.cpp:\n\n``` c++\nif (attempt_cast(std::strtoll(reinterpret_cast<typename string_t::const_pointer>(m_start), \n                             &endptr, 10), result.m_value.number_unsigned))\n```\n\nHere `result.m_value.number_unsigned` should be `result.m_value.number_integer`.\n\nThen in unit.hpp there is another bug:\n\n``` c++\n// integer object creation - expected to wrap and still be stored as an integer\nj = -2147483649LL; // -2^31-1\nCHECK(static_cast<int>(j.type()) == static_cast<int>(custom_json::value_t::number_integer));\nCHECK(j.get<int32_t>() == 2147483647.0);  // Wrap\n\n// integer parsing - expected to overflow and be stored as a float\nj = custom_json::parse(\"-2147483648\"); // -2^31\nCHECK(static_cast<int>(j.type()) == static_cast<int>(custom_json::value_t::number_float));\nCHECK(j.get<float>() == -2147483648.0);\n```\n\nThe second test for parsing uses an incorrect value.  Instead of `-2147483648` it should read `-2147483649`.\n\nThe previous value `-2147483648` should not have wrapped as was intended however the bug in json.hpp had the effect of causing the cast to fail anyway.  The second error effectively hid the first error so the unit test passed.\n\nOne other small error is that all of the floating point comparisons in this section should have an 'f' after the literals otherwise they are double literals - so the above comparison would read `CHECK(j.get<float>() == -2147483650.0f`.\n"}, {"url": "https://api.github.com/repos/nlohmann/json/issues/195", "repository_url": "https://api.github.com/repos/nlohmann/json", "labels_url": "https://api.github.com/repos/nlohmann/json/issues/195/labels{/name}", "comments_url": "https://api.github.com/repos/nlohmann/json/issues/195/comments", "events_url": "https://api.github.com/repos/nlohmann/json/issues/195/events", "html_url": "https://github.com/nlohmann/json/issues/195", "id": 128533614, "node_id": "MDU6SXNzdWUxMjg1MzM2MTQ=", "number": 195, "title": "GCC/clang floating point parsing bug in strtod()", "user": {"login": "twelsby", "id": 16697318, "node_id": "MDQ6VXNlcjE2Njk3MzE4", "avatar_url": "https://avatars0.githubusercontent.com/u/16697318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/twelsby", "html_url": "https://github.com/twelsby", "followers_url": "https://api.github.com/users/twelsby/followers", "following_url": "https://api.github.com/users/twelsby/following{/other_user}", "gists_url": "https://api.github.com/users/twelsby/gists{/gist_id}", "starred_url": "https://api.github.com/users/twelsby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/twelsby/subscriptions", "organizations_url": "https://api.github.com/users/twelsby/orgs", "repos_url": "https://api.github.com/users/twelsby/repos", "events_url": "https://api.github.com/users/twelsby/events{/privacy}", "received_events_url": "https://api.github.com/users/twelsby/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 46374231, "node_id": "MDU6TGFiZWw0NjM3NDIzMQ==", "url": "https://api.github.com/repos/nlohmann/json/labels/kind:%20bug", "name": "kind: bug", "color": "fc2929", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nlohmann/json/milestones/3", "html_url": "https://github.com/nlohmann/json/milestone/3", "labels_url": "https://api.github.com/repos/nlohmann/json/milestones/3/labels", "id": 1510937, "node_id": "MDk6TWlsZXN0b25lMTUxMDkzNw==", "number": 3, "title": "Release 2.0.0", "description": "This release adds several features such as JSON Pointers, JSON Patch, or support for 64 bit unsigned integers. Furthermore, several (subtle) bugs have been fixed.\r\n\r\nAs `noexcept` and `constexpr` specifier have been added to several functions, the public API has effectively been changed in a (potential) non-backwards compatible manner. As we adhere to [Semantic Versioning](http://semver.org), this calls for a new major version, so say hello to 2\ufe0f\u20e3.0\ufe0f\u20e3.0\ufe0f\u20e3.", "creator": {"login": "nlohmann", "id": 159488, "node_id": "MDQ6VXNlcjE1OTQ4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/159488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nlohmann", "html_url": "https://github.com/nlohmann", "followers_url": "https://api.github.com/users/nlohmann/followers", "following_url": "https://api.github.com/users/nlohmann/following{/other_user}", "gists_url": "https://api.github.com/users/nlohmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/nlohmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nlohmann/subscriptions", "organizations_url": "https://api.github.com/users/nlohmann/orgs", "repos_url": "https://api.github.com/users/nlohmann/repos", "events_url": "https://api.github.com/users/nlohmann/events{/privacy}", "received_events_url": "https://api.github.com/users/nlohmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 34, "state": "closed", "created_at": "2016-01-17T12:14:39Z", "updated_at": "2016-06-23T22:53:19Z", "due_on": "2016-06-23T07:00:00Z", "closed_at": "2016-06-23T22:53:19Z"}, "comments": 1, "created_at": "2016-01-25T13:08:57Z", "updated_at": "2016-01-26T18:13:42Z", "closed_at": "2016-01-26T18:13:42Z", "author_association": "CONTRIBUTOR", "body": "I have managed to identify the source of the failure to parse the following number:\n\n`1.00000000000000011102230246251565404236316680908203126`\n\nwhich should parse to:\n\n`1.00000000000000022`\n\nHowever under gcc/clang _on Travis only_ it instead parsed as exactly `1`.  Local gcc/clang builds and AppVeyor builds all ran correctly.\n\nThis was mentioned in issue #186 where I speculated that it was likely caused by a bug in `strtod()` in what must have been an older version on Travis.  To address that issue and get the rest of the tests to run on Travis, pull #191 (now merged) disabled this test for gcc/clang.\n\nResearch identified the following blog post: [How strtod() Works (and Sometimes Doesn\u2019t)](http://www.exploringbinary.com/how-strtod-works-and-sometimes-doesnt/), which indicates that it was caused by the double rounding error that was suspected all along to have caused it.  Although the bug was fixed back in 2013, it appears that the bug is still present in both gcc and clang on the version of Ubuntu on which the Travis builds run (precise).\n\nTravis also has a more recent version of Ubuntu (trusty), which is currently in beta.  I decided see if upgrading `.travis.yml` to build on trusty instead might address the bug and allow the test to also be done under gcc/clang - it works.  The trusty environment is beta but there do not appear to be any issues with the build and it is inevitable that we will need to migrate to trusty eventually so it might as well be now.\n"}, {"url": "https://api.github.com/repos/nlohmann/json/issues/194", "repository_url": "https://api.github.com/repos/nlohmann/json", "labels_url": "https://api.github.com/repos/nlohmann/json/issues/194/labels{/name}", "comments_url": "https://api.github.com/repos/nlohmann/json/issues/194/comments", "events_url": "https://api.github.com/repos/nlohmann/json/issues/194/events", "html_url": "https://github.com/nlohmann/json/issues/194", "id": 128405188, "node_id": "MDU6SXNzdWUxMjg0MDUxODg=", "number": 194, "title": "Small error in pull #185", "user": {"login": "twelsby", "id": 16697318, "node_id": "MDQ6VXNlcjE2Njk3MzE4", "avatar_url": "https://avatars0.githubusercontent.com/u/16697318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/twelsby", "html_url": "https://github.com/twelsby", "followers_url": "https://api.github.com/users/twelsby/followers", "following_url": "https://api.github.com/users/twelsby/following{/other_user}", "gists_url": "https://api.github.com/users/twelsby/gists{/gist_id}", "starred_url": "https://api.github.com/users/twelsby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/twelsby/subscriptions", "organizations_url": "https://api.github.com/users/twelsby/orgs", "repos_url": "https://api.github.com/users/twelsby/repos", "events_url": "https://api.github.com/users/twelsby/events{/privacy}", "received_events_url": "https://api.github.com/users/twelsby/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 46374231, "node_id": "MDU6TGFiZWw0NjM3NDIzMQ==", "url": "https://api.github.com/repos/nlohmann/json/labels/kind:%20bug", "name": "kind: bug", "color": "fc2929", "default": false}], "state": "closed", "locked": false, "assignee": {"login": "nlohmann", "id": 159488, "node_id": "MDQ6VXNlcjE1OTQ4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/159488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nlohmann", "html_url": "https://github.com/nlohmann", "followers_url": "https://api.github.com/users/nlohmann/followers", "following_url": "https://api.github.com/users/nlohmann/following{/other_user}", "gists_url": "https://api.github.com/users/nlohmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/nlohmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nlohmann/subscriptions", "organizations_url": "https://api.github.com/users/nlohmann/orgs", "repos_url": "https://api.github.com/users/nlohmann/repos", "events_url": "https://api.github.com/users/nlohmann/events{/privacy}", "received_events_url": "https://api.github.com/users/nlohmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nlohmann", "id": 159488, "node_id": "MDQ6VXNlcjE1OTQ4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/159488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nlohmann", "html_url": "https://github.com/nlohmann", "followers_url": "https://api.github.com/users/nlohmann/followers", "following_url": "https://api.github.com/users/nlohmann/following{/other_user}", "gists_url": "https://api.github.com/users/nlohmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/nlohmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nlohmann/subscriptions", "organizations_url": "https://api.github.com/users/nlohmann/orgs", "repos_url": "https://api.github.com/users/nlohmann/repos", "events_url": "https://api.github.com/users/nlohmann/events{/privacy}", "received_events_url": "https://api.github.com/users/nlohmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/nlohmann/json/milestones/2", "html_url": "https://github.com/nlohmann/json/milestone/2", "labels_url": "https://api.github.com/repos/nlohmann/json/milestones/2/labels", "id": 1479859, "node_id": "MDk6TWlsZXN0b25lMTQ3OTg1OQ==", "number": 2, "title": "Release 1.1.0", "description": "", "creator": {"login": "nlohmann", "id": 159488, "node_id": "MDQ6VXNlcjE1OTQ4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/159488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nlohmann", "html_url": "https://github.com/nlohmann", "followers_url": "https://api.github.com/users/nlohmann/followers", "following_url": "https://api.github.com/users/nlohmann/following{/other_user}", "gists_url": "https://api.github.com/users/nlohmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/nlohmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nlohmann/subscriptions", "organizations_url": "https://api.github.com/users/nlohmann/orgs", "repos_url": "https://api.github.com/users/nlohmann/repos", "events_url": "https://api.github.com/users/nlohmann/events{/privacy}", "received_events_url": "https://api.github.com/users/nlohmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2016-01-01T17:36:30Z", "updated_at": "2016-01-26T05:26:42Z", "due_on": "2016-01-23T08:00:00Z", "closed_at": "2016-01-26T05:26:42Z"}, "comments": 1, "created_at": "2016-01-24T15:37:39Z", "updated_at": "2016-01-24T15:42:22Z", "closed_at": "2016-01-24T15:42:22Z", "author_association": "CONTRIBUTOR", "body": "I was just merging the recent commits and encountered a conflict due to a typo in pull #185 (my bad).\n\nAt line 4863 is the following:\n\n``` c++\nelse if (lhs_type == value_t::number_integer and rhs_type == value_t::number_float)\n{\n    return static_cast<number_float_t>(lhs.m_value.number_integer == rhs.m_value.number_float);\n}\nelse if (lhs_type == value_t::number_float and rhs_type == value_t::number_integer)\n{\n    return lhs.m_value.number_float == static_cast<number_float_t>(rhs.m_value.number_integer);\n}\n```\n\nThe top return value is incorrect as the parenthesis should surround only `lhs.m_value.number_integer`\n"}, {"url": "https://api.github.com/repos/nlohmann/json/issues/192", "repository_url": "https://api.github.com/repos/nlohmann/json", "labels_url": "https://api.github.com/repos/nlohmann/json/issues/192/labels{/name}", "comments_url": "https://api.github.com/repos/nlohmann/json/issues/192/comments", "events_url": "https://api.github.com/repos/nlohmann/json/issues/192/events", "html_url": "https://github.com/nlohmann/json/issues/192", "id": 128392347, "node_id": "MDU6SXNzdWUxMjgzOTIzNDc=", "number": 192, "title": "What is within scope?", "user": {"login": "whackashoe", "id": 855581, "node_id": "MDQ6VXNlcjg1NTU4MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/855581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/whackashoe", "html_url": "https://github.com/whackashoe", "followers_url": "https://api.github.com/users/whackashoe/followers", "following_url": "https://api.github.com/users/whackashoe/following{/other_user}", "gists_url": "https://api.github.com/users/whackashoe/gists{/gist_id}", "starred_url": "https://api.github.com/users/whackashoe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/whackashoe/subscriptions", "organizations_url": "https://api.github.com/users/whackashoe/orgs", "repos_url": "https://api.github.com/users/whackashoe/repos", "events_url": "https://api.github.com/users/whackashoe/events{/privacy}", "received_events_url": "https://api.github.com/users/whackashoe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 46374233, "node_id": "MDU6TGFiZWw0NjM3NDIzMw==", "url": "https://api.github.com/repos/nlohmann/json/labels/kind:%20enhancement/improvement", "name": "kind: enhancement/improvement", "color": "207de5", "default": false}, {"id": 46374235, "node_id": "MDU6TGFiZWw0NjM3NDIzNQ==", "url": "https://api.github.com/repos/nlohmann/json/labels/kind:%20question", "name": "kind: question", "color": "cc317c", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-01-24T12:11:33Z", "updated_at": "2016-11-13T22:37:59Z", "closed_at": "2016-02-15T20:26:54Z", "author_association": "CONTRIBUTOR", "body": "General question with a few examples:\n- json schema \n- alternative encodings such as bson or json5 (ability to swap encoder/decoder)\n- using multi-precision numbers\n\nBut on a grander level - what is the scope of nlohmann/json ? Is it to only support base json? Is it to support base json but make it easy to use weird crap? Or hard to use the above (at the benefit of keeping code easier to work with) without maintaining fork? If answer for these is fork may I suggest making a json organization so that forks could be all in one place- could be a potentially nicer namespace than the seemingly random nlohmann namespace :dancers: \n"}, {"url": "https://api.github.com/repos/nlohmann/json/issues/187", "repository_url": "https://api.github.com/repos/nlohmann/json", "labels_url": "https://api.github.com/repos/nlohmann/json/issues/187/labels{/name}", "comments_url": "https://api.github.com/repos/nlohmann/json/issues/187/comments", "events_url": "https://api.github.com/repos/nlohmann/json/issues/187/events", "html_url": "https://github.com/nlohmann/json/issues/187", "id": 128223992, "node_id": "MDU6SXNzdWUxMjgyMjM5OTI=", "number": 187, "title": "Bugs in miloyip/nativejson-benchmark: roundtrips", "user": {"login": "nlohmann", "id": 159488, "node_id": "MDQ6VXNlcjE1OTQ4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/159488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nlohmann", "html_url": "https://github.com/nlohmann", "followers_url": "https://api.github.com/users/nlohmann/followers", "following_url": "https://api.github.com/users/nlohmann/following{/other_user}", "gists_url": "https://api.github.com/users/nlohmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/nlohmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nlohmann/subscriptions", "organizations_url": "https://api.github.com/users/nlohmann/orgs", "repos_url": "https://api.github.com/users/nlohmann/repos", "events_url": "https://api.github.com/users/nlohmann/events{/privacy}", "received_events_url": "https://api.github.com/users/nlohmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 232252782, "node_id": "MDU6TGFiZWwyMzIyNTI3ODI=", "url": "https://api.github.com/repos/nlohmann/json/labels/confirmed", "name": "confirmed", "color": "e11d21", "default": false}, {"id": 46374231, "node_id": "MDU6TGFiZWw0NjM3NDIzMQ==", "url": "https://api.github.com/repos/nlohmann/json/labels/kind:%20bug", "name": "kind: bug", "color": "fc2929", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nlohmann/json/milestones/3", "html_url": "https://github.com/nlohmann/json/milestone/3", "labels_url": "https://api.github.com/repos/nlohmann/json/milestones/3/labels", "id": 1510937, "node_id": "MDk6TWlsZXN0b25lMTUxMDkzNw==", "number": 3, "title": "Release 2.0.0", "description": "This release adds several features such as JSON Pointers, JSON Patch, or support for 64 bit unsigned integers. Furthermore, several (subtle) bugs have been fixed.\r\n\r\nAs `noexcept` and `constexpr` specifier have been added to several functions, the public API has effectively been changed in a (potential) non-backwards compatible manner. As we adhere to [Semantic Versioning](http://semver.org), this calls for a new major version, so say hello to 2\ufe0f\u20e3.0\ufe0f\u20e3.0\ufe0f\u20e3.", "creator": {"login": "nlohmann", "id": 159488, "node_id": "MDQ6VXNlcjE1OTQ4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/159488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nlohmann", "html_url": "https://github.com/nlohmann", "followers_url": "https://api.github.com/users/nlohmann/followers", "following_url": "https://api.github.com/users/nlohmann/following{/other_user}", "gists_url": "https://api.github.com/users/nlohmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/nlohmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nlohmann/subscriptions", "organizations_url": "https://api.github.com/users/nlohmann/orgs", "repos_url": "https://api.github.com/users/nlohmann/repos", "events_url": "https://api.github.com/users/nlohmann/events{/privacy}", "received_events_url": "https://api.github.com/users/nlohmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 34, "state": "closed", "created_at": "2016-01-17T12:14:39Z", "updated_at": "2016-06-23T22:53:19Z", "due_on": "2016-06-23T07:00:00Z", "closed_at": "2016-06-23T22:53:19Z"}, "comments": 17, "created_at": "2016-01-22T19:15:05Z", "updated_at": "2016-01-31T09:05:44Z", "closed_at": "2016-01-30T16:43:19Z", "author_association": "OWNER", "body": "I checked the library with the latest https://github.com/miloyip/nativejson-benchmark benchmark suite. There are several errors in the round trip tests:\n- Roundtrip,Nlohmann (C++11),roundtrip20,false\n- Roundtrip,Nlohmann (C++11),roundtrip21,false\n- Roundtrip,Nlohmann (C++11),roundtrip24,false\n- Roundtrip,Nlohmann (C++11),roundtrip25,false\n- Roundtrip,Nlohmann (C++11),roundtrip26,false\n- Roundtrip,Nlohmann (C++11),roundtrip27,false\n\nThese are the values:\n- `[0.0]`\n- `[-0.0]`\n- `[5e-324]`\n- `[2.225073858507201e-308]`\n- `[2.2250738585072014e-308]`\n- `[1.7976931348623157e308]`\n\nI will have a deeper look at this later. I just wanted to paste the results here before I forget.\n"}, {"url": "https://api.github.com/repos/nlohmann/json/issues/186", "repository_url": "https://api.github.com/repos/nlohmann/json", "labels_url": "https://api.github.com/repos/nlohmann/json/issues/186/labels{/name}", "comments_url": "https://api.github.com/repos/nlohmann/json/issues/186/comments", "events_url": "https://api.github.com/repos/nlohmann/json/issues/186/events", "html_url": "https://github.com/nlohmann/json/issues/186", "id": 128223712, "node_id": "MDU6SXNzdWUxMjgyMjM3MTI=", "number": 186, "title": "Bugs in miloyip/nativejson-benchmark: floating-point parsing", "user": {"login": "nlohmann", "id": 159488, "node_id": "MDQ6VXNlcjE1OTQ4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/159488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nlohmann", "html_url": "https://github.com/nlohmann", "followers_url": "https://api.github.com/users/nlohmann/followers", "following_url": "https://api.github.com/users/nlohmann/following{/other_user}", "gists_url": "https://api.github.com/users/nlohmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/nlohmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nlohmann/subscriptions", "organizations_url": "https://api.github.com/users/nlohmann/orgs", "repos_url": "https://api.github.com/users/nlohmann/repos", "events_url": "https://api.github.com/users/nlohmann/events{/privacy}", "received_events_url": "https://api.github.com/users/nlohmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 232252782, "node_id": "MDU6TGFiZWwyMzIyNTI3ODI=", "url": "https://api.github.com/repos/nlohmann/json/labels/confirmed", "name": "confirmed", "color": "e11d21", "default": false}, {"id": 46374231, "node_id": "MDU6TGFiZWw0NjM3NDIzMQ==", "url": "https://api.github.com/repos/nlohmann/json/labels/kind:%20bug", "name": "kind: bug", "color": "fc2929", "default": false}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nlohmann/json/milestones/2", "html_url": "https://github.com/nlohmann/json/milestone/2", "labels_url": "https://api.github.com/repos/nlohmann/json/milestones/2/labels", "id": 1479859, "node_id": "MDk6TWlsZXN0b25lMTQ3OTg1OQ==", "number": 2, "title": "Release 1.1.0", "description": "", "creator": {"login": "nlohmann", "id": 159488, "node_id": "MDQ6VXNlcjE1OTQ4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/159488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nlohmann", "html_url": "https://github.com/nlohmann", "followers_url": "https://api.github.com/users/nlohmann/followers", "following_url": "https://api.github.com/users/nlohmann/following{/other_user}", "gists_url": "https://api.github.com/users/nlohmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/nlohmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nlohmann/subscriptions", "organizations_url": "https://api.github.com/users/nlohmann/orgs", "repos_url": "https://api.github.com/users/nlohmann/repos", "events_url": "https://api.github.com/users/nlohmann/events{/privacy}", "received_events_url": "https://api.github.com/users/nlohmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2016-01-01T17:36:30Z", "updated_at": "2016-01-26T05:26:42Z", "due_on": "2016-01-23T08:00:00Z", "closed_at": "2016-01-26T05:26:42Z"}, "comments": 11, "created_at": "2016-01-22T19:13:19Z", "updated_at": "2016-01-24T16:57:07Z", "closed_at": "2016-01-24T16:57:07Z", "author_association": "OWNER", "body": "I checked the library with the latest https://github.com/miloyip/nativejson-benchmark benchmark suite. There are several errors parsing floating-point numbers:\n- Parse Double,Nlohmann (C++11),double02,false\n- Parse Double,Nlohmann (C++11),double37,false\n- Parse Double,Nlohmann (C++11),double40,false\n- Parse Double,Nlohmann (C++11),double44,false\n- Parse Double,Nlohmann (C++11),double48,false\n- Parse Double,Nlohmann (C++11),double53,false\n- Parse Double,Nlohmann (C++11),double58,false\n- Parse Double,Nlohmann (C++11),double63,false\n\nThe respective code is this:\n\n``` cpp\n// Parse Double\n{\n    using rapidjson::internal::Double;\n    int i = 1;\n    #define TEST_DOUBLE(json, expect)\\\n    {\\\n        bool result = false;\\\n        double actual = 0.0;\\\n        if (test.ParseDouble(json, &actual)) \\\n            result = Double(expect).Uint64Value() == Double(actual).Uint64Value();\\\n        printf(\"double%02d: %s\\n\", i, result ? \"true\" : \"false\");\\\n        if (!result)\\\n            printf(\"JSON: %s\\nExpect: %17g\\nActual: %17g\\n\\n\", json, expect, actual);\\\n        fprintf(fp, \"2. Parse Double,%s,double%02d,%s\\n\", test.GetName(), i, result ? \"true\" : \"false\");\\\n        i++;\\\n    }\n    TEST_DOUBLE(\"[0.0]\", 0.0);\n    TEST_DOUBLE(\"[-0.0]\", -0.0);\n    TEST_DOUBLE(\"[1.0]\", 1.0);\n    TEST_DOUBLE(\"[-1.0]\", -1.0);\n    TEST_DOUBLE(\"[1.5]\", 1.5);\n    TEST_DOUBLE(\"[-1.5]\", -1.5);\n    TEST_DOUBLE(\"[3.1416]\", 3.1416);\n    TEST_DOUBLE(\"[1E10]\", 1E10);\n    TEST_DOUBLE(\"[1e10]\", 1e10);\n    TEST_DOUBLE(\"[1E+10]\", 1E+10);\n    TEST_DOUBLE(\"[1E-10]\", 1E-10);\n    TEST_DOUBLE(\"[-1E10]\", -1E10);\n    TEST_DOUBLE(\"[-1e10]\", -1e10);\n    TEST_DOUBLE(\"[-1E+10]\", -1E+10);\n    TEST_DOUBLE(\"[-1E-10]\", -1E-10);\n    TEST_DOUBLE(\"[1.234E+10]\", 1.234E+10);\n    TEST_DOUBLE(\"[1.234E-10]\", 1.234E-10);\n    TEST_DOUBLE(\"[1.79769e+308]\", 1.79769e+308);\n    TEST_DOUBLE(\"[2.22507e-308]\", 2.22507e-308);\n    TEST_DOUBLE(\"[-1.79769e+308]\", -1.79769e+308);\n    TEST_DOUBLE(\"[-2.22507e-308]\", -2.22507e-308);\n    TEST_DOUBLE(\"[4.9406564584124654e-324]\", 4.9406564584124654e-324); // minimum denormal\n    TEST_DOUBLE(\"[2.2250738585072009e-308]\", 2.2250738585072009e-308); // Max subnormal double\n    TEST_DOUBLE(\"[2.2250738585072014e-308]\", 2.2250738585072014e-308); // Min normal positive double\n    TEST_DOUBLE(\"[1.7976931348623157e+308]\", 1.7976931348623157e+308); // Max double\n    TEST_DOUBLE(\"[1e-10000]\", 0.0);                                   // must underflow\n    TEST_DOUBLE(\"[18446744073709551616]\", 18446744073709551616.0);    // 2^64 (max of uint64_t + 1, force to use double)\n    TEST_DOUBLE(\"[-9223372036854775809]\", -9223372036854775809.0);    // -2^63 - 1(min of int64_t + 1, force to use double)\n    TEST_DOUBLE(\"[0.9868011474609375]\", 0.9868011474609375);          // https://github.com/miloyip/rapidjson/issues/120\n    TEST_DOUBLE(\"[123e34]\", 123e34);                                  // Fast Path Cases In Disguise\n    TEST_DOUBLE(\"[45913141877270640000.0]\", 45913141877270640000.0);\n    TEST_DOUBLE(\"[2.2250738585072011e-308]\", 2.2250738585072011e-308); // http://www.exploringbinary.com/php-hangs-on-numeric-value-2-2250738585072011e-308/\n    //TEST_DOUBLE(\"[1e-00011111111111]\", 0.0);\n    //TEST_DOUBLE(\"[-1e-00011111111111]\", -0.0);\n    TEST_DOUBLE(\"[1e-214748363]\", 0.0);\n    TEST_DOUBLE(\"[1e-214748364]\", 0.0);\n    //TEST_DOUBLE(\"[1e-21474836311]\", 0.0);\n    TEST_DOUBLE(\"[0.017976931348623157e+310]\", 1.7976931348623157e+308); // Max double in another form\n\n    // Since\n    // abs((2^-1022 - 2^-1074) - 2.2250738585072012e-308) = 3.109754131239141401123495768877590405345064751974375599... \u00a1\u00c1 10^-324\n    // abs((2^-1022) - 2.2250738585072012e-308) = 1.830902327173324040642192159804623318305533274168872044... \u00a1\u00c1 10 ^ -324\n    // So 2.2250738585072012e-308 should round to 2^-1022 = 2.2250738585072014e-308\n    TEST_DOUBLE(\"[2.2250738585072012e-308]\", 2.2250738585072014e-308); // http://www.exploringbinary.com/java-hangs-when-converting-2-2250738585072012e-308/\n\n    // More closer to normal/subnormal boundary\n    // boundary = 2^-1022 - 2^-1075 = 2.225073858507201136057409796709131975934819546351645648... \u00a1\u00c1 10^-308\n    TEST_DOUBLE(\"[2.22507385850720113605740979670913197593481954635164564e-308]\", 2.2250738585072009e-308);\n    TEST_DOUBLE(\"[2.22507385850720113605740979670913197593481954635164565e-308]\", 2.2250738585072014e-308);\n\n    // 1.0 is in (1.0 - 2^-54, 1.0 + 2^-53)\n    // 1.0 - 2^-54 = 0.999999999999999944488848768742172978818416595458984375\n    TEST_DOUBLE(\"[0.999999999999999944488848768742172978818416595458984375]\", 1.0); // round to even\n    TEST_DOUBLE(\"[0.999999999999999944488848768742172978818416595458984374]\", 0.99999999999999989); // previous double\n    TEST_DOUBLE(\"[0.999999999999999944488848768742172978818416595458984376]\", 1.0); // next double\n    // 1.0 + 2^-53 = 1.00000000000000011102230246251565404236316680908203125\n    TEST_DOUBLE(\"[1.00000000000000011102230246251565404236316680908203125]\", 1.0); // round to even\n    TEST_DOUBLE(\"[1.00000000000000011102230246251565404236316680908203124]\", 1.0); // previous double\n    TEST_DOUBLE(\"[1.00000000000000011102230246251565404236316680908203126]\", 1.00000000000000022); // next double\n\n    // Numbers from https://github.com/floitsch/double-conversion/blob/master/test/cctest/test-strtod.cc\n\n    TEST_DOUBLE(\"[72057594037927928.0]\", 72057594037927928.0);\n    TEST_DOUBLE(\"[72057594037927936.0]\", 72057594037927936.0);\n    TEST_DOUBLE(\"[72057594037927932.0]\", 72057594037927936.0);\n    TEST_DOUBLE(\"[7205759403792793199999e-5]\", 72057594037927928.0);\n    TEST_DOUBLE(\"[7205759403792793200001e-5]\", 72057594037927936.0);\n\n    TEST_DOUBLE(\"[9223372036854774784.0]\", 9223372036854774784.0);\n    TEST_DOUBLE(\"[9223372036854775808.0]\", 9223372036854775808.0);\n    TEST_DOUBLE(\"[9223372036854775296.0]\", 9223372036854775808.0);\n    TEST_DOUBLE(\"[922337203685477529599999e-5]\", 9223372036854774784.0);\n    TEST_DOUBLE(\"[922337203685477529600001e-5]\", 9223372036854775808.0);\n\n    TEST_DOUBLE(\"[10141204801825834086073718800384]\", 10141204801825834086073718800384.0);\n    TEST_DOUBLE(\"[10141204801825835211973625643008]\", 10141204801825835211973625643008.0);\n    TEST_DOUBLE(\"[10141204801825834649023672221696]\", 10141204801825835211973625643008.0);\n    TEST_DOUBLE(\"[1014120480182583464902367222169599999e-5]\", 10141204801825834086073718800384.0);\n    TEST_DOUBLE(\"[1014120480182583464902367222169600001e-5]\", 10141204801825835211973625643008.0);\n\n    TEST_DOUBLE(\"[5708990770823838890407843763683279797179383808]\", 5708990770823838890407843763683279797179383808.0);\n    TEST_DOUBLE(\"[5708990770823839524233143877797980545530986496]\", 5708990770823839524233143877797980545530986496.0);\n    TEST_DOUBLE(\"[5708990770823839207320493820740630171355185152]\", 5708990770823839524233143877797980545530986496.0);\n    TEST_DOUBLE(\"[5708990770823839207320493820740630171355185151999e-3]\", 5708990770823838890407843763683279797179383808.0);\n    TEST_DOUBLE(\"[5708990770823839207320493820740630171355185152001e-3]\", 5708990770823839524233143877797980545530986496.0);\n\n    {\n        char n1e308[312];   // '1' followed by 308 '0'\n        n1e308[0] = '[';\n        n1e308[1] = '1';\n        for (int j = 2; j < 310; j++)\n            n1e308[j] = '0';\n        n1e308[310] = ']';\n        n1e308[311] = '\\0';\n        TEST_DOUBLE(n1e308, 1E308);\n    }\n\n    // Cover trimming\n    TEST_DOUBLE(\n        \"[2.22507385850720113605740979670913197593481954635164564802342610972482222202107694551652952390813508\"\n        \"7914149158913039621106870086438694594645527657207407820621743379988141063267329253552286881372149012\"\n        \"9811224514518898490572223072852551331557550159143974763979834118019993239625482890171070818506906306\"\n        \"6665599493827577257201576306269066333264756530000924588831643303777979186961204949739037782970490505\"\n        \"1080609940730262937128958950003583799967207254304360284078895771796150945516748243471030702609144621\"\n        \"5722898802581825451803257070188608721131280795122334262883686223215037756666225039825343359745688844\"\n        \"2390026549819838548794829220689472168983109969836584681402285424333066033985088644580400103493397042\"\n        \"7567186443383770486037861622771738545623065874679014086723327636718751234567890123456789012345678901\"\n        \"e-308]\", \n        2.2250738585072014e-308);\n}\n```\n\nI will have a deeper look at this later. I just wanted to paste the results here before I forget.\n"}, {"url": "https://api.github.com/repos/nlohmann/json/issues/185", "repository_url": "https://api.github.com/repos/nlohmann/json", "labels_url": "https://api.github.com/repos/nlohmann/json/issues/185/labels{/name}", "comments_url": "https://api.github.com/repos/nlohmann/json/issues/185/comments", "events_url": "https://api.github.com/repos/nlohmann/json/issues/185/events", "html_url": "https://github.com/nlohmann/json/issues/185", "id": 127948212, "node_id": "MDU6SXNzdWUxMjc5NDgyMTI=", "number": 185, "title": "Floating point equality", "user": {"login": "twelsby", "id": 16697318, "node_id": "MDQ6VXNlcjE2Njk3MzE4", "avatar_url": "https://avatars0.githubusercontent.com/u/16697318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/twelsby", "html_url": "https://github.com/twelsby", "followers_url": "https://api.github.com/users/twelsby/followers", "following_url": "https://api.github.com/users/twelsby/following{/other_user}", "gists_url": "https://api.github.com/users/twelsby/gists{/gist_id}", "starred_url": "https://api.github.com/users/twelsby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/twelsby/subscriptions", "organizations_url": "https://api.github.com/users/twelsby/orgs", "repos_url": "https://api.github.com/users/twelsby/repos", "events_url": "https://api.github.com/users/twelsby/events{/privacy}", "received_events_url": "https://api.github.com/users/twelsby/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nlohmann/json/milestones/2", "html_url": "https://github.com/nlohmann/json/milestone/2", "labels_url": "https://api.github.com/repos/nlohmann/json/milestones/2/labels", "id": 1479859, "node_id": "MDk6TWlsZXN0b25lMTQ3OTg1OQ==", "number": 2, "title": "Release 1.1.0", "description": "", "creator": {"login": "nlohmann", "id": 159488, "node_id": "MDQ6VXNlcjE1OTQ4OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/159488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nlohmann", "html_url": "https://github.com/nlohmann", "followers_url": "https://api.github.com/users/nlohmann/followers", "following_url": "https://api.github.com/users/nlohmann/following{/other_user}", "gists_url": "https://api.github.com/users/nlohmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/nlohmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nlohmann/subscriptions", "organizations_url": "https://api.github.com/users/nlohmann/orgs", "repos_url": "https://api.github.com/users/nlohmann/repos", "events_url": "https://api.github.com/users/nlohmann/events{/privacy}", "received_events_url": "https://api.github.com/users/nlohmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2016-01-01T17:36:30Z", "updated_at": "2016-01-26T05:26:42Z", "due_on": "2016-01-23T08:00:00Z", "closed_at": "2016-01-26T05:26:42Z"}, "comments": 5, "created_at": "2016-01-21T15:22:10Z", "updated_at": "2016-11-24T21:49:44Z", "closed_at": "2016-01-24T11:55:41Z", "author_association": "CONTRIBUTOR", "body": "I made a brief comment about some gcc's paranoid float equality warnings in issue #167 but I feel I need to draw attention to this as a separate matter, specifically the function `static bool approx(const T a, const T b)`, which may not be doing what it is intended to do.  If this function is intended as nothing more than a way to suppress gcc's compiler warning then it is achieving its objective and you can close this issue.  But if it is intended to avoid perceived pitfalls of `if(float == float)` type statements then it is not doing that.\n\nTry running this code:\n\n``` c++\n#include <random>\n#include <iostream>\n#include <float>\n\nint main()\n{\n    std::mt19937 eng;  // a core engine class \n    float halfrange = 100 * std::numeric_limits<float>::epsilon();\n    std::uniform_real_distribution<float> dist(1-halfrange, 1+halfrange);\n    int agree=0, disagree=0;\n    for (int i = 0; i < 1000000000; ++i) {\n        float a = dist(eng);\n        float b = dist(eng);\n        bool method_1 = not (a > b or a < b);\n        bool method_2 = (a == b);\n        if (method_1 or method_2) {\n            if (method_1 == method_2) agree++;\n            else disagree++;\n            std::cout << \"\\rIteration: \" << i << \" Agree: \" << agree << \" Disagree: \" << disagree;\n        }\n    }\n}\n```\n\nBasically this generates pairs of floating point numbers in a very small range about 1 and then compares them for equality using both the `==` method and the one in `approx`.  The small range is to ensure collisions occur frequently.  If either method says they are equal then it increments one of two counters depending on whether they both agree or disagree with the equality.  Let it run as long as you like - you will never see disagreement.\n\nThe only way I know of to achieve what it is trying to achieve is to determine the difference between the two floats and see if it is less than some arbitrary acceptable error (usually based on epsilon).\n\nBut I don't actually think we should be doing that.\n\nThe concern about `if(float == float)` seems to be based around the idea that floating point numbers are somehow indeterminate or uncertain but this is not true - they are fundamentally as determinate as integers - provided the storage and rounding rules are consistent, and that is what IEEE is all about.  If I assign a particular floating point number to a variable then the resulting floating point representation should be the same as long as the storage and rounding rules are the same.  If I move it to another memory location it will stay the same and I can compare it with the original for equality and it will be equal (assuming the type doesn't change during this process).  The x87 instruction set even includes instructions for testing equality.\n\nThe alleged inaccuracies in floating point numbers arise from, in my opinion, a misunderstanding about how they are stored due to the assumption that terminating floating point decimal numbers will also be terminating floating point binary numbers.  The most oft-quoted example is 0.1<sub>10</sub>, which in binary is the non-terminating 0.0001100110011...<sub>2</sub>.\n\nIf you were under the mistaken belief that 0.1<sub>10</sub> can be represented in a terminating binary floating point number then you would expect that adding it to 0.8<sub>10</sub> would produce 0.9<sub>10</sub> and that if you assigned 0.9<sub>10</sub> to another variable and compared them that they would be equal.  This is not the case because all three numbers incur rounding.\n\nApply the same logic to non-terminating decimal numbers and the problem becomes obvious.  One non-terminating decimal number is 1/3, which can be approximated as 0.33 (with as many digits as you like).  Most people would be aware that 3 \\* 1/3 = 1 but would also not be surprised that 3 \\* 0.33 does not equal 1 (no matter how many digits you use), because of the rounding.  Do the same in binary and the result seems indeterminate.\n\nThis is what is \"unsafe\" about floating point equality and if this scenario would cause problems then that is when you would apply the method I mentioned.\n\nNow none of this should concern us because nowhere are we doing actual floating point calculations.  We just take floating point numbers store them, retrieve them and compare them etc.  Even the cast with approx comparison (for the loss of precision check) doesn't do anything that would trip up.\n\nReally it should be up the the user of the library to take into account rounding because they know how precisely their data is defined, and how close they want their numbers to be before they are considered equal, and the rounding settings they have applied.  Users should be able to expect that if `operator==` says two floating point numbers are equal that they are equal, not merely close.  It is their responsibility, if storing a literal or the result of a calculation they have done, to take into account the rounding that may have occurred, the same as if they were using regular variables.\n\nThe warnings that would result can be suppressed with a `#pragma`.\n"}]